{
  "SaveName": "KT Specialist HUD + HP",
  "GameMode": "KT Specialist HUD",
  "Date": "3/3/2021 1:11:26 AM",
  "VersionNumber": "v13.0.5",
  "GameType": "",
  "GameComplexity": "",
  "Tags": [],
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Table": "Table_RPG",
  "Sky": "Sky_Museum",
  "Note": "",
  "Rules": "",
  "MusicPlayer": {
    "RepeatSong": true,
    "PlaylistEntry": -1,
    "CurrentAudioTitle": "Ultramarines Chant",
    "CurrentAudioURL": "http://cloud-3.steamusercontent.com/ugc/773976977327440295/17C1CAA1F70F178395E93C05E55946061E695598/",
    "AudioLibrary": [
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/773976977327440295/17C1CAA1F70F178395E93C05E55946061E695598/",
        "Item2": "Ultramarines Chant"
      }
    ]
  },
  "Grid": {
    "Type": 0,
    "Lines": false,
    "Color": {
      "r": 0.0,
      "g": 0.0,
      "b": 0.0
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": false,
    "BothSnapping": false,
    "xSize": 2.0,
    "ySize": 2.0,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 0.9804,
      "b": 0.8902
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": false,
    "Hiding": 0
  },
  "ComponentTags": {
    "labels": []
  },
  "Turns": {
    "Enable": false,
    "Type": 0,
    "TurnOrder": [],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "TabStates": {
    "0": {
      "title": "Rules",
      "body": "",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    },
    "1": {
      "title": "White",
      "body": "",
      "color": "White",
      "visibleColor": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "id": 1
    },
    "2": {
      "title": "Brown",
      "body": "",
      "color": "Brown",
      "visibleColor": {
        "r": 0.443,
        "g": 0.231,
        "b": 0.09
      },
      "id": 2
    },
    "3": {
      "title": "Red",
      "body": "",
      "color": "Red",
      "visibleColor": {
        "r": 0.856,
        "g": 0.1,
        "b": 0.094
      },
      "id": 3
    },
    "4": {
      "title": "Orange",
      "body": "",
      "color": "Orange",
      "visibleColor": {
        "r": 0.956,
        "g": 0.392,
        "b": 0.113
      },
      "id": 4
    },
    "5": {
      "title": "Yellow",
      "body": "",
      "color": "Yellow",
      "visibleColor": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.172
      },
      "id": 5
    },
    "6": {
      "title": "Green",
      "body": "",
      "color": "Green",
      "visibleColor": {
        "r": 0.192,
        "g": 0.701,
        "b": 0.168
      },
      "id": 6
    },
    "7": {
      "title": "Blue",
      "body": "",
      "color": "Blue",
      "visibleColor": {
        "r": 0.118,
        "g": 0.53,
        "b": 1.0
      },
      "id": 7
    },
    "8": {
      "title": "Teal",
      "body": "",
      "color": "Teal",
      "visibleColor": {
        "r": 0.129,
        "g": 0.694,
        "b": 0.607
      },
      "id": 8
    },
    "9": {
      "title": "Purple",
      "body": "",
      "color": "Purple",
      "visibleColor": {
        "r": 0.627,
        "g": 0.125,
        "b": 0.941
      },
      "id": 9
    },
    "10": {
      "title": "Pink",
      "body": "",
      "color": "Pink",
      "visibleColor": {
        "r": 0.96,
        "g": 0.439,
        "b": 0.807
      },
      "id": 10
    },
    "11": {
      "title": "Black",
      "body": "",
      "color": "Black",
      "visibleColor": {
        "r": 0.25,
        "g": 0.25,
        "b": 0.25
      },
      "id": 11
    }
  },
  "DecalPallet": [],
  "LuaScript": "--[[ Lua code. See documentation: https://api.tabletopsimulator.com/ --]]\n\n--[[ The onLoad event is called after the game save finishes loading. --]]\nfunction onLoad()\n    --[[ print('onLoad!') --]]\nend\n\n--[[ The onUpdate event is called once per frame. --]]\nfunction onUpdate()\n    --[[ print('onUpdate loop!') --]]\nend",
  "LuaScriptState": "",
  "XmlUI": "<!-- Xml UI. See documentation: https://api.tabletopsimulator.com/ui/introUI/ -->",
  "ObjectStates": [
    {
      "GUID": "7d4a29",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -2.11922264,
        "posY": 4.81034231,
        "posZ": 20.52633,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 11.7726488,
        "scaleY": 9.174497,
        "scaleZ": 4.87123871
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999997,
        "b": 0.09399996,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Red",
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "31fb71",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10.0,
        "posY": 0.9599999,
        "posZ": 6.0,
        "rotX": -1.07994538E-06,
        "rotY": 179.9734,
        "rotZ": 5.06814E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":true,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "f09c1c",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 6.0,
        "posY": 0.9599997,
        "posZ": 6.0,
        "rotX": -2.36738742E-06,
        "rotY": 179.9776,
        "rotZ": -6.9492495E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":true,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "39e51d",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 6.0,
        "posY": 0.94725,
        "posZ": 14.0,
        "rotX": 4.413958E-08,
        "rotY": 359.988953,
        "rotZ": 1.62600685E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Commander",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992466,
        "g": 0.399992466,
        "b": 0.399992466
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "2f1ba7",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -44.58013,
            "posY": 2.54172063,
            "posZ": 4.457796,
            "rotX": 359.152222,
            "rotY": 180.0999,
            "rotZ": 359.192444,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Commander",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315096/536E4631616B66E15184861964F4A83162746BF5/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "ade38d",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 8.0,
        "posY": 0.947250068,
        "posZ": 14.0,
        "rotX": -4.47408777E-09,
        "rotY": 345.014771,
        "rotZ": -1.44611377E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Combat",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "6a019d",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -41.3155174,
            "posY": 2.54038763,
            "posZ": 3.60312653,
            "rotX": 1.2585367,
            "rotY": 180.079468,
            "rotZ": 0.157610118,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Combat",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315190/81CE285F5646C5D43874DD6F54CE4FEAF76AFC65/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "dfb069",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 10.0,
        "posY": 0.9472498,
        "posZ": 14.0,
        "rotX": -4.890942E-07,
        "rotY": -0.0006808811,
        "rotZ": 7.539657E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Comms",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "187ebe",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -38.8411446,
            "posY": 2.54295349,
            "posZ": 3.83816314,
            "rotX": 1.04165864,
            "rotY": 180.021378,
            "rotZ": 359.988281,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Comms",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1643215980977173257/2395758B2C904A71FF04FE2C2F609D5FB95896F1/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "7868d8",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 14.0,
        "posY": 0.94725,
        "posZ": 14.0,
        "rotX": -3.600549E-07,
        "rotY": 0.00753530441,
        "rotZ": 7.697246E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Heavy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "25c309",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -34.36048,
            "posY": 2.54383183,
            "posZ": 4.208493,
            "rotX": 0.8452097,
            "rotY": 179.99379,
            "rotZ": 0.8119173,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Heavy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315322/9DAFCE270E106A31FEE5E52A430A85737D75812D/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "64282f",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 6.0,
        "posY": 0.9599999,
        "posZ": -10.0,
        "rotX": -7.041626E-07,
        "rotY": 359.9942,
        "rotZ": 3.08501939E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415152314/451C26E9D83EBD0824319BD5A30A074B137DCBCB/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":4,\"value\":4},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":true,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":true,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "54cdde",
          "Name": "Custom_Model",
          "Transform": {
            "posX": 6.23952947E-05,
            "posY": 0.127176031,
            "posZ": 3.942675E-05,
            "rotX": 359.982239,
            "rotY": 180.022079,
            "rotZ": 0.0281033777,
            "scaleX": 1.00000036,
            "scaleY": 0.99999994,
            "scaleZ": 1.00000048
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1192839008796636098/EAF81C000DFB25420F06C6C9B38F296896F4B887/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1192839008796637208/7ED2D09137C080C9635D473D499B9BCF1A312DD3/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414904296/F32B51596FCB671911B5C036B7BD54A6EBC9329B/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "28dc91",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 8.0,
        "posY": 0.960000038,
        "posZ": 6.0,
        "rotX": 1.277518E-06,
        "rotY": 180.028809,
        "rotZ": 1.64473329E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":true,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "20d86f",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 12.0,
        "posY": 0.9472502,
        "posZ": 14.0,
        "rotX": -9.637901E-08,
        "rotY": 0.0259940922,
        "rotZ": -1.38646826E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Demo",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "61e27e",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -36.3688278,
            "posY": 2.54489422,
            "posZ": 4.277854,
            "rotX": 0.0189531334,
            "rotY": 179.9936,
            "rotZ": 0.39410314,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Demo",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315413/5921062C810B5734F1138871EAF52ECDFF40D5BA/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "79e3f2",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 7.99999952,
        "posY": 0.9599999,
        "posZ": -9.999999,
        "rotX": 7.00614066E-07,
        "rotY": 0.0129194176,
        "rotZ": -2.243578E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415152314/451C26E9D83EBD0824319BD5A30A074B137DCBCB/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":4,\"value\":4},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":true,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "a246ac",
          "Name": "Custom_Model",
          "Transform": {
            "posX": -0.013364139,
            "posY": 0.1274,
            "posZ": -0.005475712,
            "rotX": -8.127411E-06,
            "rotY": 180.001984,
            "rotZ": -6.53937377E-06,
            "scaleX": 1.00000036,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1306556001366562407/B2F647A25A79305980EFD77B972820DCFF9BEE71/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1306556001366568502/8119734F5D54EDB9CF827D13645D49BAE4AAC534/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414904296/F32B51596FCB671911B5C036B7BD54A6EBC9329B/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "659c09",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 12.0,
        "posY": 0.9599998,
        "posZ": 6.0,
        "rotX": -9.485698E-07,
        "rotY": 180.020416,
        "rotZ": -5.17764147E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":true,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "8e057c",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 16.0,
        "posY": 0.9472501,
        "posZ": 14.0,
        "rotX": -1.7135919E-07,
        "rotY": 359.982819,
        "rotZ": -2.659058E-06,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Leader",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "2b3c81",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -31.785099,
            "posY": 2.54193616,
            "posZ": 4.473285,
            "rotX": 359.250763,
            "rotY": 179.946762,
            "rotZ": 0.457594723,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Leader",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315565/74CF0A341C68E8E15EB71D43F4705FB84A0A0238/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "501c65",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 20.0,
        "posY": 0.94724977,
        "posZ": 14.0,
        "rotX": -1.59389074E-07,
        "rotY": 269.996674,
        "rotZ": 4.11073557E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Veteran",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "14d128",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -22.09247,
            "posY": 2.504,
            "posZ": 4.96578455,
            "rotX": -3.40322231E-06,
            "rotY": 179.987488,
            "rotZ": -2.88879455E-05,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Veteran",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315669/E5904B4C399E0480FE45F87DC8E87A6B5955DD5A/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "7039b2",
      "Name": "Custom_Board",
      "Transform": {
        "posX": -14.000001,
        "posY": 0.9894172,
        "posZ": -10.000001,
        "rotX": 1.10223709E-05,
        "rotY": 179.980789,
        "rotZ": 5.04068339E-07,
        "scaleX": 0.5,
        "scaleY": 0.5,
        "scaleZ": 0.5
      },
      "Nickname": "HP Bar Writer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.2526102,
        "g": 0.2526102,
        "b": 0.2526102
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/778479488914085832/2C1A661B1587279556B6F2D773E79B26E3419966/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.633744836
      },
      "LuaScript": "-- HPBarWriter\r\n--[[LUAStart\r\nhealth = {value = 10, max = 10}\r\nmana = {value = 10, max = 10}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = false\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = false,\r\n    hideMana = false,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend\r\nLUAStop--lua]]\r\n--[[XMLStart\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"200\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      STATSIMAGE\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nXMLStop--xml]]\r\n\r\noptions = {\r\n  hideText = false,\r\n  editText = false,\r\n  hideBar = false,\r\n  hideAll = false,\r\n  showAll = true,\r\n  playerChar = false,\r\n  HP2Desc = false,\r\n  hp = 10,\r\n  mana = 10,\r\n  extra = 0\r\n}\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data ~= nil then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data[opt]\r\n      end\r\n    end\r\n  end\r\n  if options.hideText then\r\n    self.UI.setAttribute(\"hideText\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"hideText\", \"text\", \"✘\")\r\n    self.UI.setAttribute(\"hideText\", \"textColor\", \"#FFFFFF\")\r\n    Wait.frames(function() loadToggle(\"hideText\") end, 1)\r\n  end\r\n  if options.editText then\r\n    self.UI.setAttribute(\"editText\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"editText\", \"text\", \"✘\")\r\n    self.UI.setAttribute(\"editText\", \"textColor\", \"#FFFFFF\")\r\n    Wait.frames(function() loadToggle(\"editText\") end, 1)\r\n  end\r\n  if options.hideBar then\r\n    self.UI.setAttribute(\"hideBar\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"hideBar\", \"text\", \"✘\")\r\n    self.UI.setAttribute(\"hideBar\", \"textColor\", \"#FFFFFF\")\r\n    Wait.frames(function() loadToggle(\"hideBar\") end, 1)\r\n  end\r\n\r\n  self.UI.setAttribute(\"hp\", \"text\", options.hp)\r\n  self.UI.setAttribute(\"mana\", \"text\", options.mana)\r\n  self.UI.setAttribute(\"extra\", \"text\", options.extra)\r\n\r\n  if not options.showAll then\r\n    self.UI.setAttribute(\"showAll\", \"value\", \"false\")\r\n    Wait.frames(allOff, 1)\r\n  end\r\nend\r\n\r\nfunction loadToggle(id)\r\n  local toChange = \"\"\r\n  if id == \"hideText\" then\r\n    toChange = \"hpText\"\r\n  elseif id == \"editText\" then\r\n    toChange = \"addSub\"\r\n  elseif id == \"hideBar\" then\r\n    toChange = \"progressBar\"\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        if not j.getVar(\"player\") then\r\n          j.UI.setAttribute(toChange, \"visibility\", \"Black\")\r\n          if id == \"hideText\" then\r\n            j.UI.setAttribute(\"manaText\", \"visibility\", \"Black\")\r\n            j.UI.setAttribute(\"extraText\", \"visibility\", \"Black\")\r\n          elseif id == \"hideBar\" then\r\n            j.UI.setAttribute(\"progressBarS\", \"visibility\", \"Black\")\r\n          elseif id == \"editText\" then\r\n            j.UI.setAttribute(\"addSubS\", \"visibility\", \"Black\")\r\n            j.UI.setAttribute(\"addSubE\", \"visibility\", \"Black\")\r\n            j.UI.setAttribute(\"editPanel\", \"visibility\", \"Black\")\r\n            j.UI.setAttribute(\"editPanel\", \"active\", \"false\")\r\n          end\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction allOff()\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(\"panel\", \"active\", \"false\")\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode(options)\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction toggleCheckBox(player, value, id)\r\n  if self.UI.getAttribute(id, \"value\") == \"false\" then\r\n    self.UI.setAttribute(id, \"value\", \"true\")\r\n    self.UI.setAttribute(id, \"text\", \"✘\")\r\n    options[id] = true\r\n  else\r\n    self.UI.setAttribute(id, \"value\", \"false\")\r\n    self.UI.setAttribute(id, \"text\", \"\")\r\n    options[id] = false\r\n  end\r\n  self.UI.setAttribute(id, \"textColor\", \"#FFFFFF\")\r\n  local toChange = \"\"\r\n  if id == \"hideText\" then\r\n    toChange = \"hpText\"\r\n  elseif id == \"editText\" then\r\n    toChange = \"addSub\"\r\n  elseif id == \"hideBar\" then\r\n    toChange = \"progressBar\"\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        if not j.getVar(\"player\") then\r\n          j.UI.setAttribute(toChange, \"visibility\", options[id] == true and \"Black\" or \"\")\r\n          if id == \"hideText\" then\r\n            j.UI.setAttribute(\"manaText\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n            j.UI.setAttribute(\"extraText\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n          elseif id == \"hideBar\" then\r\n            j.UI.setAttribute(\"progressBarS\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n          elseif id == \"editText\" then\r\n            j.UI.setAttribute(\"addSubS\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n            j.UI.setAttribute(\"addSubE\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n            j.UI.setAttribute(\"editPanel\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n            j.UI.setAttribute(\"editPanel\", \"active\", \"false\")\r\n          end\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction toggleHideBars(player, value, id)\r\n   for i,j in pairs(getAllObjects()) do\r\n     if j ~= self and j.getName() ~= \"HP Bar Panel\" then\r\n       if j.getLuaScript():find(\"StartXML\") then\r\n          if not options.hideAll then\r\n             j.UI.setAttribute(\"ressourceBar\", \"active\", \"false\")\r\n             j.UI.setAttribute(\"ressourceBarS\", \"active\", \"false\")\r\n             j.UI.setAttribute(\"extraBar\", \"active\", \"false\")\r\n          else\r\n             j.UI.setAttribute(\"ressourceBar\", \"active\", \"true\")\r\n             local objTable = j.getTable(\"options\")\r\n             if not objTable.hideMana then\r\n                j.UI.setAttribute(\"ressourceBarS\", \"active\", \"true\")\r\n             end\r\n             if not objTable.hideExtra then\r\n                j.UI.setAttribute(\"extraBar\", \"active\", \"true\")\r\n             end\r\n          end\r\n       end\r\n     end\r\n   end\r\n   options.hideAll = not options.hideAll\r\nend\r\n\r\n\r\nfunction toggleOnOff(player, value, id)\r\n  if self.UI.getAttribute(id, \"value\") == \"false\" then\r\n    self.UI.setAttribute(id, \"value\", \"true\")\r\n    options[id] = true\r\n  else\r\n    self.UI.setAttribute(id, \"value\", \"false\")\r\n    options[id] = false\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(\"panel\", \"active\", options[id] == true and \"true\" or \"false\")\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options[id] = tonumber(value)\r\n  self.UI.setAttribute(id, \"text\", value)\r\nend\r\n\r\nfunction onCollisionEnter(collision_info)\r\n  local object = collision_info.collision_object\r\n  if object.tag == \"Figure\" or object.tag == \"Tileset\" or object.tag == \"rpgFigurine\" or object.tag == \"Figurine\" then\r\n    local assets = self.UI.getCustomAssets()\r\n    local script = self.getLuaScript()\r\n    local xml = script:sub(script:find(\"XMLStart\")+8, script:find(\"XMLStop\")-1)\r\n    local newScript = script:sub(script:find(\"LUAStart\")+8, script:find(\"LUAStop\")-1)\r\n    local stats = \"statNames = {\"\r\n    local xmlStats = \"\"\r\n    for j,i in pairs(assets) do\r\n      stats = stats .. i.name .. \" = false, \"\r\n      xmlStats = xmlStats .. '<Button id=\"' .. i.name .. '\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"' .. i.name .. '\" preserveAspect=\"true\"></Image></Button>\\n'\r\n    end\r\n    newScript = \"--[[StartXML\\n\" .. xml:gsub(\"STATSIMAGE\", xmlStats) .. \"StopXML--xml]]\" .. stats:sub(1, -3) .. \"}\\n\" .. newScript\r\n    xml = xml:gsub(\"STATSIMAGE\", xmlStats)\r\n    if not options.hideText and options.HP2Desc then\r\n      object.setDescription(options.hp .. \"/\" .. options.hp)\r\n    end\r\n    newScript = newScript:gsub(\"health = {value = 10, max = 10}\", \"health = {value = \" .. options.hp ..\", max = \" .. options.hp .. \"}\")\r\n    newScript = newScript:gsub(\"mana = {value = 10, max = 10}\", \"mana = {value = \" .. options.mana ..\", max = \" .. options.mana .. \"}\")\r\n\r\n    if options.hp == 0 then\r\n      newScript = newScript:gsub(\"hideHp = false,\", \"hideHp = true,\")\r\n    end\r\n    if options.mana == 0 then\r\n      newScript = newScript:gsub(\"hideMana = false,\", \"hideMana = true,\")\r\n    end\r\n    if options.extra ~= 0 then\r\n      newScript = newScript:gsub(\"hideExtra = true,\", \"hideExtra = false,\")\r\n    end\r\n    newScript = newScript:gsub('<VerticalLayout id=\"bars\" height=\"200\">', '<VerticalLayout id=\"bars\" height=\"' .. 200 + (options.mana == 0 and -100 or 0) + (options.extra ~= 0 and 100 or 0) .. '\">')\r\n\r\n\r\n    if options.playerChar then\r\n      newScript = newScript:gsub(\"player = false\", \"player = true\")\r\n      if options.HP2Desc then\r\n        newScript = newScript:gsub(\"HP2Desc = false,\", \"HP2Desc = true,\")\r\n      end\r\n    else\r\n      if options.hideText then\r\n        newScript = newScript:gsub('id=\"hpText\" visibility=\"\"', 'id=\"hpText\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"manaText\" visibility=\"\"', 'id=\"manaText\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"extraText\" visibility=\"\"', 'id=\"extraText\" visibility=\"Black\"')\r\n      end\r\n      if options.hideBar then\r\n        newScript = newScript:gsub('id=\"progressBar\" visibility=\"\"', 'id=\"progressBar\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"progressBarS\" visibility=\"\"', 'id=\"progressBarS\" visibility=\"Black\"')\r\n      end\r\n      if options.editText then\r\n        newScript = newScript:gsub('id=\"addSub\" visibility=\"\"', 'id=\"addSub\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"addSubS\" visibility=\"\"', 'id=\"addSubS\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"addSubE\" visibility=\"\"', 'id=\"addSubE\" visibility=\"Black\"')\r\n        newScript = newScript:gsub('id=\"editPanel\" visibility=\"\"', 'id=\"editPanel\" visibility=\"Black\"')\r\n      end\r\n    end\r\n    newScript = newScript:gsub('<Panel id=\"panel\" position=\"0 0 -220\"', '<Panel id=\"panel\" position=\"0 0 ' .. object.getBounds().size.y / object.getScale().y * 110 .. '\"')\r\n    object.setLuaScript(newScript)\r\n    -- Wait.time(function()\r\n    --   object.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. object.getBounds().size.y / object.getScale().y * 110)\r\n    -- end, 1)\r\n  end\r\nend",
      "LuaScriptState": "{\"editText\":false,\"extra\":0,\"hideAll\":false,\"hideBar\":false,\"hideText\":false,\"hp\":0,\"HP2Desc\":false,\"mana\":0,\"playerChar\":true,\"showAll\":false}",
      "XmlUI": "<Defaults>\r\n  <Button scale=\"0.2 0.2 0.2\" text=\"\" value=\"false\" width=\"270\" height=\"210\" onClick=\"toggleCheckBox\" fontSize=\"180\" textColor=\"#FFFFFF\" color=\"#00000000\"/>\r\n  <InputField scale=\"0.2 0.2 0.2\" rotation=\"180 180 0\" width=\"880\" height=\"400\" fontSize=\"250\" color=\"#80808000\" textColor=\"#FFFFFF\" characterValidation=\"Decimal\" textAlignment=\"MiddleCenter\" onEndEdit=\"onEndEdit\"/>\r\n</Defaults>\r\n\r\n<Button id=\"playerChar\" position=\"218 18 -60\"/>\r\n<Button id=\"hideBar\" position=\"218 96 -60\"/>\r\n<Button id=\"hideText\" position=\"218 176 -60\"/>\r\n<Button id=\"editText\" position=\"218 250 -60\"/>\r\n<Button id=\"showAll\" position=\"650 0 -60\" text=\"\" value=\"true\" width=\"1800\" height=\"8300\" onClick=\"toggleOnOff\"/>\r\n<Button id=\"HideBars\" position=\"-177 667 -60\" width=\"4830\" height=\"520\" onClick=\"toggleHideBars\"/>\r\n<InputField id=\"hp\" position=\"-158 323 -60\"/>\r\n<InputField id=\"mana\" position=\"-158 400 -60\"/>\r\n<InputField id=\"extra\" position=\"-158 474 -60\" text=\"0\"/>",
      "CustomUIAssets": [
        {
          "Name": "Commander",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315096/536E4631616B66E15184861964F4A83162746BF5/"
        },
        {
          "Name": "Combat",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315190/81CE285F5646C5D43874DD6F54CE4FEAF76AFC65/"
        },
        {
          "Name": "Comms",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1643215980977173257/2395758B2C904A71FF04FE2C2F609D5FB95896F1/"
        },
        {
          "Name": "Demo",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315413/5921062C810B5734F1138871EAF52ECDFF40D5BA/"
        },
        {
          "Name": "Heavy",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315322/9DAFCE270E106A31FEE5E52A430A85737D75812D/"
        },
        {
          "Name": "Leader",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315565/74CF0A341C68E8E15EB71D43F4705FB84A0A0238/"
        },
        {
          "Name": "Medic",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315759/BDB0E902462310790D37EE2944D641911D684F2B/"
        },
        {
          "Name": "Scout",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315855/EE716DB9984D76D92B0E8242666C762F51DBA69F/"
        },
        {
          "Name": "Sniper",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315952/43DF4224ECDCE5F3DAC338822842A1CD87EF71EB/"
        },
        {
          "Name": "Veteran",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315669/E5904B4C399E0480FE45F87DC8E87A6B5955DD5A/"
        },
        {
          "Name": "Zealot",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223316053/05326BE13848ADDD0F2EA018373BD6F9A2DBF540/"
        },
        {
          "Name": "W",
          "URL": "http://cloud-3.steamusercontent.com/ugc/1644343169223316144/8CEA509CCDB68E814440359F8938FA97569C07C4/"
        }
      ],
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": -2.03485537,
            "y": 0.5922427,
            "z": -2.89208937
          },
          "Tags": []
        }
      ]
    },
    {
      "GUID": "088aa2",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 12.000001,
        "posY": 0.9600001,
        "posZ": -10.0,
        "rotX": 1.70623E-06,
        "rotY": 0.0225030035,
        "rotZ": 3.40510553E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":4,\"value\":2},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":true,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "eb2a46",
          "Name": "Custom_Model",
          "Transform": {
            "posX": -0.00266969879,
            "posY": 0.127400041,
            "posZ": -0.0104113566,
            "rotX": -5.407104E-08,
            "rotY": 165.008,
            "rotZ": 4.698022E-08,
            "scaleX": 1.00000024,
            "scaleY": 1.0,
            "scaleZ": 1.00000024
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1192839234866851750/E60AECB74E7218E45212F4452AB229509437D727/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1192839234866852024/05562DC319148A57FC8600DB129EB44A7C676003/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "60b02c",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10.0,
        "posY": 0.9599998,
        "posZ": -10.0,
        "rotX": 6.11528E-07,
        "rotY": 0.0177175626,
        "rotZ": 2.93827634E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415152314/451C26E9D83EBD0824319BD5A30A074B137DCBCB/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":4,\"value\":3},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":true,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "a0a403",
          "Name": "Custom_Model",
          "Transform": {
            "posX": -0.004547144,
            "posY": 0.127400041,
            "posZ": -0.00740434648,
            "rotX": 4.59545419E-07,
            "rotY": 90.02872,
            "rotZ": -5.68697146E-07,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1698381639958088845/F96C0D35E62D3576B41A1962374E8A0ADE409D12/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1698381639958089117/FD1E67CB2BBFA8B710F3D705C3999F58D1F31F4F/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414904296/F32B51596FCB671911B5C036B7BD54A6EBC9329B/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "137520",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 14.0,
        "posY": 0.9599997,
        "posZ": 6.0,
        "rotX": -1.054157E-06,
        "rotY": 179.979355,
        "rotZ": 3.00680131E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":true,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "82080c",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 16.0,
        "posY": 0.960000038,
        "posZ": 6.0,
        "rotX": 2.02286151E-06,
        "rotY": 179.969452,
        "rotZ": -6.31601438E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":true,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "e6171f",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -26.0,
        "posY": 0.9599999,
        "posZ": -6.0,
        "rotX": -2.12527979E-07,
        "rotY": 5.611308E-05,
        "rotZ": -6.128527E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "222c9e",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -26.0,
        "posY": 0.9599999,
        "posZ": -8.0,
        "rotX": -1.74444563E-06,
        "rotY": 1.22730262E-05,
        "rotZ": -2.0299326E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415152314/451C26E9D83EBD0824319BD5A30A074B137DCBCB/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "4c8c05",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -26.0,
        "posY": 0.9599999,
        "posZ": -4.0,
        "rotX": -1.44596186E-06,
        "rotY": 2.3905659E-05,
        "rotZ": 8.531462E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415147438/6B86F444AF4815CE6F0BBB1AEA644476B505AEEF/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414910691/A38AFE0E8955841404269A62127443886ED1BD53/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "53e96b",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 18.0,
        "posY": 0.947249949,
        "posZ": 14.0,
        "rotX": -2.05725229E-07,
        "rotY": 359.982971,
        "rotZ": -2.53977621E-08,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Medic",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "7ef319",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -30.0327244,
            "posY": 2.54262853,
            "posZ": 4.394551,
            "rotX": 359.7038,
            "rotY": 179.995483,
            "rotZ": 0.7138258,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Medic",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315759/BDB0E902462310790D37EE2944D641911D684F2B/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "173a7d",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 22.0,
        "posY": 0.94725,
        "posZ": 14.0,
        "rotX": 2.62103725E-07,
        "rotY": 29.9878883,
        "rotZ": 2.211327E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Scout",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "9ef457",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -26.77811,
            "posY": 2.53813052,
            "posZ": 4.72288942,
            "rotX": 0.07268475,
            "rotY": 179.957,
            "rotZ": 0.887312,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Scout",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315855/EE716DB9984D76D92B0E8242666C762F51DBA69F/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "8d5499",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 14.0,
        "posY": 0.95999974,
        "posZ": -10.0,
        "rotX": -1.23443488E-06,
        "rotY": 359.9794,
        "rotZ": -2.58777982E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":4,\"value\":1},\"mana\":{\"max\":2,\"value\":2},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":true,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "b8d8bc",
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0105707152,
            "posY": 0.143263817,
            "posZ": 0.0113955559,
            "rotX": 0.0001280675,
            "rotY": 59.9729,
            "rotZ": 0.0006417625,
            "scaleX": 1.00000024,
            "scaleY": 1.17,
            "scaleZ": 1.00000024
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1559892058415002530/0AE678126F786016D98671F44184CF3807549D3F/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1559892058415004928/E505BE416D484C3F38EF2FB43B088626913906F8/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        {
          "GUID": "54c3f1",
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0105821658,
            "posY": 0.141404986,
            "posZ": 0.0114117637,
            "rotX": 0.000124549784,
            "rotY": 59.9731178,
            "rotZ": 0.0006415352,
            "scaleX": 1.00645232,
            "scaleY": 1.177548,
            "scaleZ": 1.00645232
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1559892058415008567/7586BF98FF447EA33528B02A38979034D7927340/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1559892058415015615/F631D7F07A08969BB88A06D12FB1B356E12FD84F/",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 1,
            "CustomShader": {
              "SpecularColor": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "SpecularIntensity": 0.0,
              "SpecularSharpness": 2.0,
              "FresnelStrength": 0.0
            },
            "CastShadows": true
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "349c94",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 22.0,
        "posY": 0.9599998,
        "posZ": 6.0,
        "rotX": 3.23267068E-06,
        "rotY": 180.034058,
        "rotZ": -6.553498E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":true,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "b14474",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 18.0,
        "posY": 0.960000038,
        "posZ": 6.0,
        "rotX": -6.012295E-08,
        "rotY": 179.968918,
        "rotZ": -1.20466564E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":true,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "d5a5eb",
      "Name": "backgammon_piece_white",
      "Transform": {
        "posX": -2.0,
        "posY": 1.01599765,
        "posZ": -4.0,
        "rotX": -1.41531231E-07,
        "rotY": 0.0005276854,
        "rotZ": 8.4666155E-08,
        "scaleX": 3.0,
        "scaleY": 0.4858753,
        "scaleZ": 3.0
      },
      "Nickname": "HP Bar Writer",
      "Description": "Drop Standee here",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.735294163,
        "g": 0.735294163,
        "b": 0.735294163
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "--[[LUAStart\r\nhealth = {value = 10, max = 10}\r\n\r\nmana = {value = 10, max = 10}\r\n\r\noptions = {\r\n    HP2Desc = true,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 110,\r\n    showBaseButtons = false,\r\n    showBarButtons = true,\r\n    hideMana = false,\r\n    incrementBy = 1,\r\n    rotation = 90\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"editButton\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"editButton\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    Wait.frames(function() self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\") end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"editButton\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"editButton\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend\r\nLUAStop--lua]]\r\n--[[XMLStart\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n  <Panel id=\"ressourceBar\" position=\"0 100 0\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Button id=\"editButton\" height=\"100\" width=\"600\" text=\"10/10\" color=\"#00000000\"></Button>\r\n    <Panel id=\"addSub\" height=\"100\" width=\"825\" active=\"true\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" height=\"100\" width=\"825\" active=\"true\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Button id=\"editButtonS\" height=\"100\" width=\"600\" text=\"\" color=\"#00000000\"></Button>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 770 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      STATSIMAGE\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nXMLStop--xml]]\r\n\r\noptions = {\r\n  hideText = false,\r\n  editText = false,\r\n  hideBar = false,\r\n  showAll = true,\r\n  hp = 10,\r\n  mana = 10\r\n}\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data ~= nil then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data[opt]\r\n      end\r\n    end\r\n  end\r\n  if options.hideText then\r\n    self.UI.setAttribute(\"hideText\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"hideText\", \"text\", \"☑\")\r\n    Wait.frames(function() loadToggle(\"hideText\") end, 1)\r\n  end\r\n  if options.editText then\r\n    self.UI.setAttribute(\"editText\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"editText\", \"text\", \"☑\")\r\n    Wait.frames(function() loadToggle(\"editText\") end, 1)\r\n  end\r\n  if options.hideBar then\r\n    self.UI.setAttribute(\"hideBar\", \"value\", \"true\")\r\n    self.UI.setAttribute(\"hideBar\", \"text\", \"☑\")\r\n    Wait.frames(function() loadToggle(\"hideBar\") end, 1)\r\n  end\r\n  if not options.showAll then\r\n    self.UI.setAttribute(\"showAll\", \"value\", \"false\")\r\n    self.UI.setAttribute(\"showAll\", \"textColor\", \"#8F0000\")\r\n    Wait.frames(allOff, 1)\r\n  end\r\nend\r\n\r\nfunction loadToggle(id)\r\n  local toChange = \"\"\r\n  if id == \"hideText\" then\r\n    toChange = \"editButton\"\r\n  elseif id == \"editText\" then\r\n    toChange = \"addSub\"\r\n  elseif id == \"hideBar\" then\r\n    toChange = \"progressBar\"\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(toChange, \"visibility\", \"Black\")\r\n        if id == \"hideText\" then\r\n          j.UI.setAttribute(\"editButtonS\", \"visibility\", \"Black\")\r\n        elseif id == \"hideBar\" then\r\n          j.UI.setAttribute(\"progressBarS\", \"visibility\", \"Black\")\r\n        elseif id == \"editText\" then\r\n          j.UI.setAttribute(\"addSubS\", \"visibility\", \"Black\")\r\n          j.UI.setAttribute(\"editPanel\", \"visibility\", \"Black\")\r\n          j.UI.setAttribute(\"editPanel\", \"active\", \"false\")\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction allOff()\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(\"panel\", \"active\", \"false\")\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode(options)\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction toggleCheckBox(player, value, id)\r\n  if self.UI.getAttribute(id, \"value\") == \"false\" then\r\n    self.UI.setAttribute(id, \"value\", \"true\")\r\n    self.UI.setAttribute(id, \"text\", \"☑\")\r\n    options[id] = true\r\n  else\r\n    self.UI.setAttribute(id, \"value\", \"false\")\r\n    self.UI.setAttribute(id, \"text\", \"☐\")\r\n    options[id] = false\r\n  end\r\n  local toChange = \"\"\r\n  if id == \"hideText\" then\r\n    toChange = \"editButton\"\r\n  elseif id == \"editText\" then\r\n    toChange = \"addSub\"\r\n  elseif id == \"hideBar\" then\r\n    toChange = \"progressBar\"\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(toChange, \"visibility\", options[id] == true and \"Black\" or \"\")\r\n        if id == \"hideText\" then\r\n          j.UI.setAttribute(\"manaText\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n        elseif id == \"hideBar\" then\r\n          j.UI.setAttribute(\"progressBarS\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n        elseif id == \"editText\" then\r\n          j.UI.setAttribute(\"addSubS\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n          j.UI.setAttribute(\"editPanel\", \"visibility\", options[id] == true and \"Black\" or \"\")\r\n          j.UI.setAttribute(\"editPanel\", \"active\", \"false\")\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction toggleOnOff(player, value, id)\r\n  if self.UI.getAttribute(id, \"value\") == \"false\" then\r\n    self.UI.setAttribute(id, \"value\", \"true\")\r\n    self.UI.setAttribute(id, \"textColor\", \"#009D02\")\r\n    options[id] = true\r\n  else\r\n    self.UI.setAttribute(id, \"value\", \"false\")\r\n    self.UI.setAttribute(id, \"textColor\", \"#8F0000\")\r\n    options[id] = false\r\n  end\r\n  for i,j in pairs(getAllObjects()) do\r\n    if j ~= self then\r\n      if j.getLuaScript():find(\"StartXML\") then\r\n        j.UI.setAttribute(\"panel\", \"active\", options[id] == true and \"true\" or \"false\")\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options[id] = tonumber(value)\r\n  self.UI.setAttribute(id, \"text\", value)\r\nend\r\n\r\nfunction onCollisionEnter(collision_info)\r\n  local object = collision_info.collision_object\r\n  if object.tag == \"Figure\" or object.tag == \"Tileset\" or object.tag == \"rpgFigurine\" or object.tag == \"Figurine\" then\r\n    local assets = self.UI.getCustomAssets()\r\n    local script = self.getLuaScript()\r\n    local xml = script:sub(script:find(\"XMLStart\")+8, script:find(\"XMLStop\")-1)\r\n    local newScript = script:sub(script:find(\"LUAStart\")+8, script:find(\"LUAStop\")-1)\r\n    local stats = \"statNames = {\"\r\n    local xmlStats = \"\"\r\n    for j,i in pairs(assets) do\r\n      stats = stats .. i.name .. \" = false, \"\r\n      xmlStats = xmlStats .. '<Button id=\"' .. i.name .. '\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"' .. i.name .. '\" preserveAspect=\"true\"></Image></Button>\\n'\r\n    end\r\n    newScript = \"--[[StartXML\\n\" .. xml:gsub(\"STATSIMAGE\", xmlStats) .. \"StopXML--xml]]\" .. stats:sub(1, -3) .. \"}\\n\" .. newScript\r\n    xml = xml:gsub(\"STATSIMAGE\", xmlStats)\r\n    if options.hideText then\r\n      object.setDescription(options.hp .. \"/\" .. options.hp)\r\n    end\r\n    newScript = newScript:gsub(\"health = {value = 10, max = 10}\", \"health = {value = \" .. options.hp ..\", max = \" .. options.hp .. \"}\")\r\n    newScript = newScript:gsub(\"mana = {value = 10, max = 10}\", \"mana = {value = \" .. options.mana ..\", max = \" .. options.mana .. \"}\")\r\n    if options.mana == 0 then\r\n      newScript = newScript:gsub(\"hideMana = false,\", \"hideMana = true,\")\r\n    end\r\n\r\n    object.setLuaScript(newScript)\r\n    Wait.time(function()\r\n      object.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. object.getBounds().size.y / object.getScale().y * 110)\r\n    end, 1)\r\n  end\r\nend",
      "LuaScriptState": "{\"editText\":false,\"hideBar\":false,\"hideText\":false,\"hp\":0,\"mana\":0,\"showAll\":true}",
      "XmlUI": "<Defaults>\r\n  <Button scale=\"0.1 0.1 0.1\" text=\"&#x2610;\" value=\"false\" width=\"100\" height=\"100\" onClick=\"toggleCheckBox\" fontSize=\"80\" textColor=\"#000000\" color=\"#00000000\"/>\r\n  <Text scale=\"0.1 0.1 0.1\" width=\"600\" height=\"200\" fontSize=\"60\" color=\"#000000\"/>\r\n  <InputField scale=\"0.1 0.1 0.1\" width=\"300\" height=\"90\" fontSize=\"60\" color=\"#80808080\" textColor=\"#000000\" characterValidation=\"Decimal\" textAlignment=\"MiddleCenter\" onEndEdit=\"onEndEdit\"/>\r\n</Defaults>\r\n\r\n<Text text=\"HP Bar Writer\" position=\"0 28 -11.6\" fontSize=\"80\" fontStyle=\"Bold\"></Text>\r\n<Text text=\"Only Black sees Bar\" position=\"8 15 -11.6\"></Text>\r\n<Button id=\"hideBar\" position=\"-25 15 -11.6\" ></Button>\r\n<Text text=\"Only Black sees Text\" position=\"8.5 5 -11.6\"></Text>\r\n<Button id=\"hideText\" position=\"-25 5 -11.6\" ></Button>\r\n<Text text=\"Only Black edit Text\" position=\"7.3 -5 -11.6\"></Text>\r\n<Button id=\"editText\" position=\"-25 -5 -11.6\" ></Button>\r\n<Button id=\"showAll\" position=\"0 -30 -11.6\" rotation=\"0 0 90\" text=\"&#x0229D;\" value=\"true\" width=\"500\" height=\"500\" fontSize=\"400\" fontStyle=\"Bold\" textColor=\"#009D02\" onClick=\"toggleOnOff\"></Button>\r\n<InputField id=\"hp\" position=\"0 -45 -11.6\">10</InputField>\r\n<InputField id=\"mana\" position=\"0 -55 -11.6\">10</InputField>",
      "CustomUIAssets": [
        {
          "Name": "Immobilize",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528836886/7AA6CA95BBF139820CBC718B49CFC7B6A04A87EC/"
        },
        {
          "Name": "Wound",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528836579/C8CC80C66767752271BC7A4DA20F510CAC866CBC/"
        },
        {
          "Name": "Muddle",
          "URL": "http://cloud-3.steamusercontent.com/ugc/858355614963002792/2202C2E43818DF155EC191D49E5D28B6FB9292FB/"
        },
        {
          "Name": "Invisible",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528835724/9D0B7971ACDA8A2CB1E8AFA759BDE277EFC51044/"
        },
        {
          "Name": "Disarm",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528836254/51823BAC3FA76ADD1F63D860902221AA08FD989E/"
        },
        {
          "Name": "Strengthen",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528833394/D799FD468387361D49A611A398DE4B5FC93FDE01/"
        },
        {
          "Name": "Stun",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528833726/9EB6FC0A8D9233428338344D7BE37C0622595BF1/"
        },
        {
          "Name": "Poison",
          "URL": "http://cloud-3.steamusercontent.com/ugc/993513340528833982/6C406A52CBD770474F4F4F0AEA5144AADD2D98E2/"
        }
      ]
    },
    {
      "GUID": "5420fd",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 24.0,
        "posY": 0.947249949,
        "posZ": 14.0,
        "rotX": -4.36788383E-07,
        "rotY": 6.25561142E-06,
        "rotZ": 6.524536E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Sniper",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "40415b",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -24.24997,
            "posY": 2.55400681,
            "posZ": 4.30439329,
            "rotX": 6.66888764E-06,
            "rotY": 179.975052,
            "rotZ": 8.849704E-06,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Sniper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223315952/43DF4224ECDCE5F3DAC338822842A1CD87EF71EB/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "5b66bb",
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 26.0,
        "posY": 0.9472499,
        "posZ": 14.0,
        "rotX": -2.94875235E-07,
        "rotY": -4.431745E-06,
        "rotZ": 4.65409443E-07,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "Zealot",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.399992436,
        "g": 0.399992436,
        "b": 0.399992436
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "25eb49",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -19.87288,
            "posY": 2.54173946,
            "posZ": 4.499018,
            "rotX": 1.13009286,
            "rotY": 180.0862,
            "rotZ": 0.5500692,
            "scaleX": 0.26,
            "scaleY": 1.0,
            "scaleZ": 0.26
          },
          "Nickname": "Zealot",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/1644343169223316053/05326BE13848ADDD0F2EA018373BD6F9A2DBF540/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 5.0,
              "StandUp": false,
              "Stackable": false
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "ec465e",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 20.0,
        "posY": 0.9599999,
        "posZ": 6.0,
        "rotX": -3.10203768E-06,
        "rotY": 179.976852,
        "rotZ": -3.46051729E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":true,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "20a980",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 24.0,
        "posY": 0.9599999,
        "posZ": 6.0,
        "rotX": 1.29129614E-06,
        "rotY": 179.970657,
        "rotZ": -9.692363E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":true,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "2dfef1",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 26.0,
        "posY": 0.9599999,
        "posZ": 6.0,
        "rotX": -2.13948624E-06,
        "rotY": 179.977844,
        "rotZ": -2.368784E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":false,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":true}}",
      "XmlUI": ""
    },
    {
      "GUID": "c6f972",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -25.42049,
        "posY": 1.01000965,
        "posZ": -0.000101675279,
        "rotX": -1.929055E-05,
        "rotY": 180.002609,
        "rotZ": 0.0001817663,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Specialist Icon",
      "Description": "If you only want icons only - drop a bases one at a time from below on the writer then remove from writer. Then drop icon token from bag on to base.\nOne face of icon can be clicked to remove it, just drop a new one on to re-add if removed by accident",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "f8e9ab",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -18.0,
        "posY": 1.01,
        "posZ": 1.21071935E-08,
        "rotX": -2.78914371E-07,
        "rotY": 180.0,
        "rotZ": -1.0353E-06,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "HP Bar writer",
      "Description": "If you want icons and/or bars check the box on writer for player controlled character and adjust the values for 1 - 3 as appropriate before dropping base on to writer.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "7a234b",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -10.0,
        "posY": 1.01,
        "posZ": -4.84287739E-08,
        "rotX": 3.80362053E-08,
        "rotY": 180.0,
        "rotZ": -4.56921E-07,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Game usage",
      "Description": "The writer needs to be on table for icons and bars to work, if saved items appear with white squares or similar above them, hit the back arrow at top of screen, reloading should cause script update and now display correctly",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "22cbfc",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -1.99999988,
        "posY": 1.00999987,
        "posZ": -1.46217644E-07,
        "rotX": -2.06557431E-07,
        "rotY": 180.0,
        "rotZ": 7.460717E-08,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "HP Bar writer disc",
      "Description": "Use this disc to instantly hide/unhide all added icons/bars",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "717f24",
      "Name": "Custom_Token",
      "Transform": {
        "posX": 10.0,
        "posY": 1.01,
        "posZ": -14.0,
        "rotX": -1.00098976E-06,
        "rotY": 180.0,
        "rotZ": -1.62411709E-06,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Using bars",
      "Description": "Left click on right hand end of bar will bring up -/+ buttons to adjust bars, re-click same location to hide\n\nLeft click over centre of bar to bring up options, re-click same location to hide",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "693377",
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 8.0,
        "posY": 0.9628493,
        "posZ": 4.827731E-10,
        "rotX": -2.00836084E-07,
        "rotY": 179.977066,
        "rotZ": -1.92454777E-07,
        "scaleX": 0.825000167,
        "scaleY": 0.825000167,
        "scaleZ": 0.825000167
      },
      "Nickname": "Watch Master",
      "Description": "M: 6\"\nWS: 2+\r\nBS: 2+\r\nS: 4\r\nT: 4\r\nW: 6\r\r\nA 4\r\nLd 9\r\nSave 2+/4++",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/968723247313644029/A7ADC24227232845E0E7EBB0BDA84C23B4BFA40A/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 1,
        "TypeIndex": 0,
        "LoopingEffectIndex": 0
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "States": {
        "2": {
          "GUID": "eddd8f",
          "Name": "Custom_Assetbundle",
          "Transform": {
            "posX": -7.000029,
            "posY": 1.49151874,
            "posZ": 7.00000858,
            "rotX": 0.0168874972,
            "rotY": 179.97699,
            "rotZ": 0.0798870847,
            "scaleX": 0.825000167,
            "scaleY": 0.825000167,
            "scaleZ": 0.825000167
          },
          "Nickname": "Watch Master",
          "Description": "M: 6\"\nWS: 2+\r\nBS: 2+\r\nS: 4\r\nT: 4\r\nW: 6\r\r\nA 4\r\nLd 9\r\nSave 2+/4++",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomAssetbundle": {
            "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/965348083824803643/9FF5CFC21EDD0DC8D29042728A190AD15F9357FB/",
            "AssetbundleSecondaryURL": "",
            "MaterialIndex": 1,
            "TypeIndex": 1,
            "LoopingEffectIndex": 0
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      }
    },
    {
      "GUID": "f74163",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 6.0,
        "posY": 0.9599999,
        "posZ": 9.130899E-09,
        "rotX": -3.39509756E-06,
        "rotY": 179.9776,
        "rotZ": 1.11867848E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":true,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": ""
    },
    {
      "GUID": "58a30d",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10.0,
        "posY": 0.96,
        "posZ": 8.009374E-08,
        "rotX": 2.62231674E-06,
        "rotY": 179.977844,
        "rotZ": 9.303914E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1043093675415148094/DEAAD0D4F5771EC7613627CC0D74E011905986A8/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/1043093675414907254/274B3A7DDF7DE1495626704FF1644A81D055BFB7/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.875,
            "g": 0.812880337,
            "b": 0.7463235
          },
          "SpecularIntensity": 0.05,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.107142858
        },
        "CastShadows": true
      },
      "LuaScript": "--[[StartXML\n\r\n<Defaults>\r\n  <Button onClick=\"onClick\" fontSize=\"80\" fontStyle=\"Bold\" textColor=\"#FFFFFF\" color=\"#000000F0\"/>\r\n  <Text fontSize=\"80\" fontStyle=\"Bold\" color=\"#FFFFFF\"/>\r\n  <InputField fontSize=\"70\" color=\"#000000F0\" textColor=\"#FFFFFF\" characterValidation=\"Integer\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"panel\" position=\"0 0 -220\" rotation=\"90 270 90\" scale=\"0.2 0.2\">\r\n<VerticalLayout id=\"bars\" height=\"100\">\r\n  <Panel id=\"ressourceBar\" active=\"true\">\r\n    <ProgressBar id=\"progressBar\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#710000\"></ProgressBar>\r\n    <Text id=\"hpText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <HorizontalLayout height=\"100\" width=\"600\">\r\n       <Button id=\"leftSide\" text=\"\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButton\" color=\"#00000000\"></Button>\r\n       <Button id=\"editButtonS\" text=\"\" color=\"#00000000\"></Button>\r\n    </HorizontalLayout>\r\n    <Panel id=\"addSub\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"sub\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"add\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"ressourceBarS\" active=\"true\">\r\n    <ProgressBar id=\"progressBarS\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#000071\"></ProgressBar>\r\n    <Text id=\"manaText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubS\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subS\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addS\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  <Panel id=\"extraBar\" active=\"true\">\r\n    <ProgressBar id=\"extraProgress\" visibility=\"\" height=\"100\" width=\"600\" showPercentageText=\"false\" color=\"#000000E0\" percentage=\"100\" fillImageColor=\"#FFCF00\"></ProgressBar>\r\n    <Text id=\"extraText\" visibility=\"\" height=\"100\" width=\"600\" text=\"10/10\"></Text>\r\n    <Panel id=\"addSubE\" visibility=\"\" height=\"100\" width=\"825\" active=\"false\">\r\n      <HorizontalLayout spacing=\"625\">\r\n        <Button id=\"subE\" text=\"-\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n        <Button id=\"addE\" text=\"+\" color=\"#FFFFFF\" textColor=\"#000000\"></Button>\r\n      </HorizontalLayout>\r\n    </Panel>\r\n  </Panel>\r\n  </VerticalLayout>\r\n  <Panel id=\"editPanel\" height=\"620\" width=\"600\" position=\"0 970 0\" active=\"False\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BZ\" fontSize=\"70\" text=\"Below Zero\" color=\"#000000F0\"></Button>\r\n        <Button id=\"AM\" fontSize=\"70\" text=\"Above Max\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"160\">\r\n        <Button id=\"BB\" fontSize=\"70\" text=\"Base Buttons\" color=\"#000000F0\"></Button>\r\n        <Button id=\"HB\" fontSize=\"70\" text=\"HP Bar Buttons\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HM\" fontSize=\"70\" text=\"Hide Ressource Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout minheight=\"100\">\r\n        <Button id=\"HE\" fontSize=\"70\" text=\"Hide Extra Bar\" color=\"#000000F0\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subHeight\" text=\"◄\"></Button>\r\n        <Text>Height</Text>\r\n        <Button id=\"addHeight\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Button id=\"subRotation\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Rotation</Text>\r\n        <Button id=\"addRotation\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMax\" text=\"◄\"></Button>\r\n        <Text>Max</Text>\r\n        <Button id=\"addMax\" text=\"►\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxS\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max R</Text>\r\n        <Button id=\"addMaxS\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"55\"  minheight=\"100\">\r\n        <Button id=\"subMaxE\" text=\"◄\" minwidth=\"90\"></Button>\r\n        <Text>Max E</Text>\r\n        <Button id=\"addMaxE\" text=\"►\" minwidth=\"90\"></Button>\r\n      </HorizontalLayout>\r\n      <HorizontalLayout spacing=\"10\" minheight=\"100\">\r\n        <Text fontSize=\"50\">Increment by:</Text>\r\n        <InputField id=\"increment\" onEndEdit=\"onEndEdit\" minwidth=\"200\" text=\"1\"></InputField>\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n  <Panel id=\"statePanel\" height=\"300\" width=\"-5\" position=\"0 370 0\">\r\n    <VerticalLayout>\r\n      <HorizontalLayout spacing=\"5\">\r\n      <Button id=\"Commander\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Commander\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Combat\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Combat\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Comms\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Comms\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Demo\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Demo\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Heavy\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Heavy\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Leader\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Leader\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Medic\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Medic\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Scout\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Scout\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Sniper\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Sniper\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Veteran\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Veteran\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"Zealot\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"Zealot\" preserveAspect=\"true\"></Image></Button>\n<Button id=\"W\" color=\"#FFFFFF00\" active=\"false\"><Image image=\"W\" preserveAspect=\"true\"></Image></Button>\n\r\n      </HorizontalLayout>\r\n    </VerticalLayout>\r\n  </Panel>\r\n</Panel>\r\nStopXML--xml]]statNames = {Commander = false, Combat = false, Comms = false, Demo = false, Heavy = false, Leader = false, Medic = false, Scout = false, Sniper = false, Veteran = false, Zealot = false, W = false}\n\r\nhealth = {value = 0, max = 0}\r\nmana = {value = 0, max = 0}\r\nextra = {value = 10, max = 10}\r\n\r\nplayer = true\r\n\r\noptions = {\r\n    HP2Desc = false,\r\n    belowZero = false,\r\n    aboveMax = false,\r\n    heightModifier = 2500,\r\n    showBaseButtons = false,\r\n    showBarButtons = false,\r\n    hideHp = true,\r\n    hideMana = true,\r\n    hideExtra = true,\r\n    incrementBy = 1,\r\n    rotation = 270\r\n}\r\n\r\n\r\nfunction onLoad(save_state)\r\n  if save_state ~= \"\" then\r\n    saved_data = JSON.decode(save_state)\r\n    if saved_data.health then\r\n      for heal,_ in pairs(health) do\r\n        health[heal] = saved_data.health[heal]\r\n      end\r\n    end\r\n    if saved_data.mana then\r\n      for res,_ in pairs(mana) do\r\n        mana[res] = saved_data.mana[res]\r\n      end\r\n    end\r\n    if saved_data.extra then\r\n      for res,_ in pairs(extra) do\r\n        extra[res] = saved_data.extra[res]\r\n      end\r\n    end\r\n    if saved_data.options then\r\n      for opt,_ in pairs(options) do\r\n        options[opt] = saved_data.options[opt]\r\n      end\r\n    end\r\n    if saved_data.statNames then\r\n      for stat,_ in pairs(statNames) do\r\n        statNames[stat] = saved_data.statNames[stat]\r\n      end\r\n    end\r\n  end\r\n  local script = self.getLuaScript()\r\n  local xml = script:sub(script:find(\"StartXML\")+8, script:find(\"StopXML\")-1)\r\n  self.UI.setXml(xml)\r\n  Wait.frames(load, 10)\r\nend\r\n\r\nfunction load()\r\n  self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n  self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n  self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n  self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n  self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n  self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"increment\", \"text\", options.incrementBy)\r\n\r\n  for i,j in pairs(statNames) do\r\n    if j == true then\r\n      self.UI.setAttribute(i, \"active\", true)\r\n    end\r\n  end\r\n  Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n\r\n  if options.showBarButtons then\r\n    self.UI.setAttribute(\"addSub\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n    self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n  end\r\n\r\n  self.UI.setAttribute(\"ressourceBar\", \"active\", options.hideHp == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n  self.UI.setAttribute(\"addSub\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubS\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"addSubE\", \"active\", options.showBarButtons == true and \"True\" or \"False\")\r\n  self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n\r\n  if options.showBaseButtons then\r\n    createBtns()\r\n  end\r\nend\r\n\r\nfunction onSave()\r\n  local save_state = JSON.encode({health = health, mana = mana, extra = extra, options = options, statNames = statNames})\r\n  self.script_state = save_state\r\nend\r\n\r\nfunction createBtns()\r\n  local buttonParameter = {click_function = \"add\", function_owner = self, position = {0.3, 0.04, 0.4}, label = \"+\", width = 250, height = 250, font_size = 300, color = {0,0,0,0}, font_color = {0,0,0,100}}\r\n  self.createButton(buttonParameter)\r\n  buttonParameter.position = {-0.3, 0.04, 0.4}\r\n  buttonParameter.click_function = \"sub\"\r\n  buttonParameter.label = \"-\"\r\n  self.createButton(buttonParameter)\r\nend\r\n\r\nfunction add() onClick(-1, - 1, \"add\") end\r\nfunction sub() onClick(-1, - 1, \"sub\")end\r\n\r\nfunction onEndEdit(player, value, id)\r\n  options.incrementBy = value\r\nend\r\n\r\nfunction onClickEx(params)\r\n  onClick(params.player, params.value, params.id)\r\nend\r\n\r\nfunction onClick(player, value, id)\r\n  if id == \"editButton\" then\r\n    if self.UI.getAttribute(\"editPanel\", \"active\") == \"False\" or self.UI.getAttribute(\"editPanel\", \"active\") == nil then\r\n      self.UI.setAttribute(\"editPanel\", \"active\", true)\r\n    else\r\n      self.UI.setAttribute(\"editPanel\", \"active\", false)\r\n    end\r\n  elseif id == \"subHeight\" or id == \"addHeight\" then\r\n    if id == \"addHeight\" then\r\n      options.heightModifier = options.heightModifier + options.incrementBy\r\n    else\r\n      options.heightModifier = options.heightModifier - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"position\", \"0 0 -\" .. self.getBounds().size.y / self.getScale().y * options.heightModifier)\r\n  elseif id == \"subRotation\" or id == \"addRotation\" then\r\n    if id == \"addRotation\" then\r\n      options.rotation = options.rotation + options.incrementBy\r\n    else\r\n      options.rotation = options.rotation - options.incrementBy\r\n    end\r\n    self.UI.setAttribute(\"panel\", \"rotation\", options.rotation .. \" 270 90\")\r\n  elseif id == \"BB\" then\r\n    if options.showBaseButtons then\r\n      self.clearButtons()\r\n      options.showBaseButtons = false\r\n    else\r\n      createBtns()\r\n      options.showBaseButtons = true\r\n    end\r\n  elseif id == \"HM\" then\r\n    options.hideMana = not options.hideMana\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"ressourceBarS\", \"active\", options.hideMana == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideMana == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HE\" then\r\n    options.hideExtra = not options.hideExtra\r\n    local vertical = self.UI.getAttribute(\"bars\", \"height\")\r\n    Wait.frames(function()\r\n      self.UI.setAttribute(\"extraBar\", \"active\", options.hideExtra == true and \"False\" or \"True\")\r\n      self.UI.setAttribute(\"bars\", \"height\", vertical + (options.hideExtra == true and -100 or 100))\r\n    end, 1)\r\n  elseif id == \"HB\" or id == \"editButtonS\" then\r\n    if options.showBarButtons then\r\n      self.UI.setAttribute(\"addSub\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", false)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", false)\r\n      options.showBarButtons = false\r\n    else\r\n      self.UI.setAttribute(\"addSub\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubS\", \"active\", true)\r\n      self.UI.setAttribute(\"addSubE\", \"active\", true)\r\n      options.showBarButtons = true\r\n    end\r\n  elseif id == \"BZ\" then\r\n    if options.belowZero then\r\n      options.belowZero = false\r\n      broadcastToAll(\"Below Zero Denied!\", {1,1,1})\r\n    else\r\n      options.belowZero = true\r\n      broadcastToAll(\"Below Zero allowed!\", {1,1,1})\r\n    end\r\n  elseif id == \"AM\" then\r\n    if options.aboveMax then\r\n      options.aboveMax = false\r\n      broadcastToAll(\"Above Max Denied!\", {1,1,1})\r\n    else\r\n      options.aboveMax = true\r\n      broadcastToAll(\"Above Max allowed!\", {1,1,1})\r\n    end\r\n  elseif statNames[id] ~= nil then\r\n    self.UI.setAttribute(id, \"active\", false)\r\n    self.UI.setAttribute(\"statePanel\", \"width\", tonumber(self.UI.getAttribute(\"statePanel\", \"width\")-300))\r\n    statNames[id] = false\r\n  else\r\n    if id == \"add\" then health.value = health.value + options.incrementBy\r\n    elseif id == \"addS\" then mana.value = mana.value + options.incrementBy\r\n    elseif id == \"addE\" then extra.value = extra.value + options.incrementBy\r\n    elseif id == \"sub\" then health.value = health.value - options.incrementBy\r\n    elseif id == \"subS\" then mana.value = mana.value - options.incrementBy\r\n    elseif id == \"subE\" then extra.value = extra.value - options.incrementBy\r\n    elseif id == \"addMax\" then health.value = health.value + options.incrementBy\r\n      health.max = health.max + options.incrementBy\r\n    elseif id == \"addMaxS\" then mana.value = mana.value + options.incrementBy\r\n      mana.max = mana.max + options.incrementBy\r\n    elseif id == \"addMaxE\" then extra.value = extra.value + options.incrementBy\r\n      extra.max = extra.max + options.incrementBy\r\n    elseif id == \"subMax\" then health.value = health.value - options.incrementBy\r\n      health.max = health.max - options.incrementBy\r\n    elseif id == \"subMaxS\" then mana.value = mana.value - options.incrementBy\r\n      mana.max = mana.max - options.incrementBy\r\n    elseif id == \"subMaxE\" then extra.value = extra.value - options.incrementBy\r\n      extra.max = extra.max - options.incrementBy\r\n    end\r\n    if health.value > health.max and not options.aboveMax then health.value = health.max end\r\n    if health.value < 0 and not options.belowZero then health.value = 0 end\r\n    if mana.value > mana.max and not options.aboveMax then mana.value = mana.max end\r\n    if mana.value < 0 and not options.belowZero then mana.value = 0 end\r\n    if extra.value > extra.max and not options.aboveMax then extra.value = extra.max end\r\n    if extra.value < 0 and not options.belowZero then extra.value = 0 end\r\n    self.UI.setAttribute(\"progressBar\", \"percentage\", health.value / health.max * 100)\r\n    self.UI.setAttribute(\"progressBarS\", \"percentage\", mana.value / mana.max * 100)\r\n    self.UI.setAttribute(\"extraProgress\", \"percentage\", extra.value / extra.max * 100)\r\n    self.UI.setAttribute(\"hpText\", \"text\", health.value .. \"/\" .. health.max)\r\n    self.UI.setAttribute(\"manaText\", \"text\", mana.value .. \"/\" .. mana.max)\r\n    self.UI.setAttribute(\"extraText\", \"text\", extra.value .. \"/\" .. extra.max)\r\n    if options.HP2Desc then\r\n      self.setDescription(health.value .. \"/\" .. health.max)\r\n    end\r\n  end\r\n  self.UI.setAttribute(\"hpText\", \"textColor\", \"#FFFFFF\")\r\n  self.UI.setAttribute(\"manaText\", \"textColor\", \"#FFFFFF\")\r\nend\r\n\r\nfunction onCollisionEnter(a)\r\n  local newState = a.collision_object.getName()\r\n  if statNames[newState] ~= nil then\r\n    statNames[newState] = true\r\n    a.collision_object.destruct()\r\n    self.UI.setAttribute(newState, \"active\", true)\r\n    Wait.frames(function() self.UI.setAttribute(\"statePanel\", \"width\", getStatsCount()*300) end, 1)\r\n  end\r\nend\r\n\r\nfunction getStatsCount()\r\n  local count = 0\r\n  for i,j in pairs(statNames) do\r\n    if self.UI.getAttribute(i, \"active\") == \"True\" or self.UI.getAttribute(i, \"active\") == \"true\" then\r\n      count = count + 1\r\n    end\r\n  end\r\n  return count\r\nend",
      "LuaScriptState": "{\"extra\":{\"max\":10,\"value\":10},\"health\":{\"max\":0,\"value\":0},\"mana\":{\"max\":0,\"value\":0},\"options\":{\"aboveMax\":false,\"belowZero\":false,\"heightModifier\":2500,\"hideExtra\":true,\"hideHp\":true,\"hideMana\":true,\"HP2Desc\":false,\"incrementBy\":1,\"rotation\":270,\"showBarButtons\":false,\"showBaseButtons\":false},\"statNames\":{\"Combat\":false,\"Commander\":true,\"Comms\":false,\"Demo\":false,\"Heavy\":false,\"Leader\":false,\"Medic\":false,\"Scout\":false,\"Sniper\":false,\"Veteran\":false,\"W\":false,\"Zealot\":false}}",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "9a9a1b",
          "Name": "Custom_Assetbundle",
          "Transform": {
            "posX": -0.012261142,
            "posY": 0.00284952,
            "posZ": 0.011133167,
            "rotX": -5.797927E-07,
            "rotY": -0.000784014352,
            "rotZ": -2.628097E-06,
            "scaleX": 0.8250009,
            "scaleY": 0.825000167,
            "scaleZ": 0.8250009
          },
          "Nickname": "Watch Master",
          "Description": "M: 6\"\nWS: 2+\r\nBS: 2+\r\nS: 4\r\nT: 4\r\nW: 6\r\r\nA 4\r\nLd 9\r\nSave 2+/4++",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomAssetbundle": {
            "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/968723247313644029/A7ADC24227232845E0E7EBB0BDA84C23B4BFA40A/",
            "AssetbundleSecondaryURL": "",
            "MaterialIndex": 1,
            "TypeIndex": 0,
            "LoopingEffectIndex": 0
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": "",
          "States": {
            "2": {
              "GUID": "eddd8f",
              "Name": "Custom_Assetbundle",
              "Transform": {
                "posX": -7.000029,
                "posY": 1.49151874,
                "posZ": 7.00000858,
                "rotX": 0.0168874972,
                "rotY": 179.97699,
                "rotZ": 0.0798870847,
                "scaleX": 0.825000167,
                "scaleY": 0.825000167,
                "scaleZ": 0.825000167
              },
              "Nickname": "Watch Master",
              "Description": "M: 6\"\nWS: 2+\r\nBS: 2+\r\nS: 4\r\nT: 4\r\nW: 6\r\r\nA 4\r\nLd 9\r\nSave 2+/4++",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "LayoutGroupSortIndex": 0,
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "MeasureMovement": false,
              "DragSelectable": true,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomAssetbundle": {
                "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/965348083824803643/9FF5CFC21EDD0DC8D29042728A190AD15F9357FB/",
                "AssetbundleSecondaryURL": "",
                "MaterialIndex": 1,
                "TypeIndex": 1,
                "LoopingEffectIndex": 0
              },
              "LuaScript": "",
              "LuaScriptState": "",
              "XmlUI": ""
            }
          }
        }
      ]
    },
    {
      "GUID": "6f7ff7",
      "Name": "Custom_Token",
      "Transform": {
        "posX": 7.99998951,
        "posY": 1.01,
        "posZ": -3.99999666,
        "rotX": -9.091557E-07,
        "rotY": 180.008133,
        "rotZ": -1.04573724E-06,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Joining bases to models",
      "Description": "Lock new base to table (ricght click -> toggle ->lock or hover with mouse and press \"L\" key, lock model to table, press \"F8\" to switch to \"Gizmo\" tool, align both items into same place. Press \"F1\", hold \"alt\" and drag select both items so highlighted yellow,",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "060997",
      "Name": "Custom_Token",
      "Transform": {
        "posX": 13.9999981,
        "posY": 1.00999987,
        "posZ": -3.99999475,
        "rotX": 2.74426088E-06,
        "rotY": 179.999481,
        "rotZ": -5.25550149E-07,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Joining...cont.",
      "Description": "press \"F6\" for the \"attach\" tool, popointer should now look like a chain. \nMouse around base area until only base highlight goes from yellow to white and then left click. If icon/bars disappear, it is because models is joined to base not base ",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "bc6951",
      "Name": "Custom_Token",
      "Transform": {
        "posX": 19.9999981,
        "posY": 1.00999987,
        "posZ": -3.999996,
        "rotX": 7.339442E-07,
        "rotY": 179.9995,
        "rotZ": -4.092974E-09,
        "scaleX": 1.25705588,
        "scaleY": 1.0,
        "scaleZ": 1.25705588
      },
      "Nickname": "Joining...cont..",
      "Description": "dwd by selecting model using \"F1\", left click and hold using attach tool and drag arrow in to clear space off of table and try again.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "63f63b",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -25.42803,
        "posY": 1.00999963,
        "posZ": 5.99949646,
        "rotX": 4.195453E-05,
        "rotY": 179.981155,
        "rotZ": 2.65312028E-05,
        "scaleX": 1.25355864,
        "scaleY": 1.0,
        "scaleZ": 1.25355864
      },
      "Nickname": "HUD-able objects",
      "Description": "The bar writer output is proportional to the colider values of the object being written to.\nYou may be able to write directly to various models, but if you run in to difficulties try copy/pasting the colider from one of the below bases to your model,",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "47e83e",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -18.0014782,
        "posY": 1.00999987,
        "posZ": 6.00003672,
        "rotX": -2.066207E-06,
        "rotY": 179.991165,
        "rotZ": 1.99004226E-08,
        "scaleX": 1.25355864,
        "scaleY": 1.0,
        "scaleZ": 1.25355864
      },
      "Nickname": "HUD-able objects...cont.",
      "Description": "you may do this by right clicking any of the below bases -> custom and copy the data from colider field and paste to the same filed within your own model.\nAlternatively use the bases below and then \"join\" them your your model after the fact.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    },
    {
      "GUID": "fa67e5",
      "Name": "3DText",
      "Transform": {
        "posX": -24.0750732,
        "posY": 0.961134434,
        "posZ": -3.7491138,
        "rotX": 90.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "40mm",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 36
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "1834e2",
      "Name": "3DText",
      "Transform": {
        "posX": -24.03104,
        "posY": 0.961135566,
        "posZ": -5.743086,
        "rotX": 90.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "32mm",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 36
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a57ffe",
      "Name": "3DText",
      "Transform": {
        "posX": -24.05809,
        "posY": 0.961135566,
        "posZ": -7.743875,
        "rotX": 90.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "28mm",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 36
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "7c06ed",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -22.0,
        "posY": 1.00999987,
        "posZ": 14.0,
        "rotX": 1.743286E-08,
        "rotY": 179.999481,
        "rotZ": -1.44429242E-08,
        "scaleX": 2.67356229,
        "scaleY": 1.0,
        "scaleZ": 2.67356229
      },
      "Nickname": "START HERE",
      "Description": "If on first loading this mod the various bases and models do not have items floating above them cycle the \"Hide all bars\" and \"power\" switch on the HP Bar Writer and HP Bar writer disc on/off by left clicking each button twice.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.928988457,
        "g": 0.932055652,
        "b": 0.9044512
      },
      "LayoutGroupSortIndex": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/958597478463166917/CB8B55C270BA45C4EABB6041B00C3AC196946342/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onload(saved_data)\r\n    f_size = 260\r\n    light_mode = false\r\n    center_mode = false\r\n    tooltip_show = true\r\n\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        light_mode = loaded_data[1]\r\n        center_mode = loaded_data[2]\r\n        tooltip_show = loaded_data[3]\r\n    end\r\n\r\n    createAll()\r\nend\r\n\r\nfunction updateSave()\r\n    local data_to_save = {light_mode, center_mode, tooltip_show}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction createAll()\r\n    s_color = {0.5, 0.5, 0.5, 95}\r\n\r\n    if light_mode then\r\n        f_color = {1,1,1,95}\r\n    else\r\n        f_color = {0,0,0,95}\r\n    end\r\n\r\n    if center_mode then\r\n        f_align = 3\r\n    else\r\n        f_align = 1\r\n    end\r\n\r\n    if tooltip_show then\r\n        ttText = self.getName() .. \"\\n----------\\n\" .. self.getDescription()\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.createInput({\r\n        value = self.getName(), \r\n        input_function = \"editName\", \r\n        label = \"Notecard\",\r\n        function_owner = self, \r\n        alignment = 3,\r\n        position = {0,0.05,-1}, \r\n        width = 1800, \r\n        height = 300, \r\n        font_size = 160, \r\n        scale={x=1, y=1, z=1},\r\n        font_color= f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createInput({\r\n        value = self.getDescription(), \r\n        label = \"\\nClick and type here\\n\\nFlip for settings\",\r\n        input_function = \"editDesc\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position = {0,0.05,0.28}, \r\n        width = 1800, \r\n        height = 1000, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0},\r\n        tooltip = ttText\r\n        })\r\n\r\n    self.createButton({\r\n        label=\"- Notecard Settings -\",\r\n        tooltip=\"- Notecard Settings -\",\r\n        click_function=\"null\",\r\n        function_owner=self,\r\n        position={0,-0.05,-1.1},\r\n        rotation={180,180,0},\r\n        height=300,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=140,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if light_mode then\r\n        lightButtonText = \"[ Set dark text ]\"\r\n    else\r\n        lightButtonText = \"[ Set light text ]\"\r\n    end\r\n    self.createButton({\r\n        label=lightButtonText,\r\n        tooltip=lightButtonText,\r\n        click_function=\"swap_fcolor\",\r\n        function_owner=self,\r\n        position={0,-0.05,-0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if center_mode then\r\n        centerButtonText = \"[ Set left align ]\"\r\n    else\r\n        centerButtonText = \"[ Set center align ]\"\r\n    end\r\n    self.createButton({\r\n        label=centerButtonText,\r\n        tooltip=centerButtonText,\r\n        click_function=\"swap_align\",\r\n        function_owner=self,\r\n        position={0,-0.05,0},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    if tooltip_show then\r\n        tooltipShowText = \"[ Hide description in tooltip ]\"\r\n    else\r\n        tooltipShowText = \"[ Show description in tooltip ]\"\r\n    end\r\n    self.createButton({\r\n        label=tooltipShowText,\r\n        tooltip=tooltipShowText,\r\n        click_function=\"swap_tooltip\",\r\n        function_owner=self,\r\n        position={0,-0.05,0.5},\r\n        rotation={180,180,0},\r\n        height=250,\r\n        width=800,\r\n        scale={x=1, y=1, z=1},\r\n        font_size=100,\r\n        font_color=s_color,\r\n        color={0,0,0,0}\r\n        })\r\n\r\n    self.createInput({\r\n        value = \"Sample Text\",\r\n        label = \"...\",\r\n        input_function = \"keepSample\", \r\n        function_owner = self, \r\n        alignment = f_align,\r\n        position={0,-0.05,1.1},\r\n        rotation={180,180,0},\r\n        width = 1800, \r\n        height = 250, \r\n        font_size = 120, \r\n        scale={x=1, y=1, z=1},\r\n        font_color=f_color,\r\n        color = {0,0,0,0}\r\n        })\r\n\r\n    setTooltips()\r\nend\r\n\r\nfunction removeAll()\r\n    self.removeInput(0)\r\n    self.removeInput(1)\r\n    self.removeInput(2)\r\n    self.removeButton(0)\r\n    self.removeButton(1)\r\n    self.removeButton(2)\r\n    self.removeButton(3)\r\nend\r\n\r\nfunction reloadAll()\r\n    removeAll()\r\n    createAll()\r\n    setTooltips()\r\n    updateSave()\r\nend\r\n\r\nfunction update_fcolor()\r\nend\r\n\r\nfunction swap_fcolor(_obj, _color, alt_click)\r\n    light_mode = not light_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_align(_obj, _color, alt_click)\r\n    center_mode = not center_mode\r\n    reloadAll()\r\nend\r\n\r\nfunction swap_tooltip(_obj, _color, alt_click)\r\n    tooltip_show = not tooltip_show\r\n    reloadAll()\r\n    setTooltips()\r\nend\r\n\r\nfunction editName(_obj, _string, value) \r\n    self.setName(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction editDesc(_obj, _string, value) \r\n    self.setDescription(value)\r\n    setTooltips()\r\nend\r\n\r\nfunction setTooltips()\r\n    title = self.getName()\r\n    if title == \"\" then\r\n        title = \"Notecard\"\r\n    end\r\n    desc = self.getDescription()\r\n\r\n    if tooltip_show then\r\n        ttText = title .. \"\\n----------\\n\" .. desc\r\n    else\r\n        ttText = \"\"\r\n    end\r\n\r\n    self.editInput({\r\n        index = 0,\r\n        value = self.getName(),\r\n        tooltip = ttText\r\n        })\r\n    self.editInput({\r\n        index = 1,\r\n        value = self.getDescription(),\r\n        tooltip = ttText\r\n        })\r\nend\r\n\r\nfunction null()\r\nend\r\n\r\nfunction keepSample(_obj, _string, value) \r\n    reloadAll()\r\nend",
      "LuaScriptState": "[false,false,false]",
      "XmlUI": ""
    }
  ]
}